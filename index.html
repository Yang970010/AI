<!DOCTYPE html>

<html>

<head>

  <title>ChineseMagic</title>

  <link rel="stylesheet" href="static/css/common.css">
  <link rel="stylesheet" href="static/css/highlight.min.css">
  <link rel="stylesheet" href="static/css/markdown.css">
  <link rel="stylesheet" href="static/css/page.css">
  <style type="text/css">
    .line {
      margin: 20px;
    }

    .line input,
    .line select {
      padding: 5px;
    }

    .line .title {
      margin-top: 20px;
      margin-bottom: 5px;
    }

    td.active {
      background: orange;
    }
  </style>
  <style data-id="immersive-translate-input-injected-css">
    .immersive-translate-input {
      position: absolute;
      top: 0;
      right: 0;
      left: 0;
      bottom: 0;
      z-index: 2147483647;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .immersive-translate-attach-loading::after {
      content: " ";

      --loading-color: #f78fb6;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      display: block;
      margin: 12px auto;
      position: relative;
      color: white;
      left: -100px;
      box-sizing: border-box;
      animation: immersiveTranslateShadowRolling 1.5s linear infinite;

      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-2000%, -50%);
      z-index: 100;
    }

    .immersive-translate-loading-spinner {
      vertical-align: middle !important;
      width: 10px !important;
      height: 10px !important;
      display: inline-block !important;
      margin: 0 4px !important;
      border: 2px rgba(221, 244, 255, 0.6) solid !important;
      border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
      border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
      border-radius: 50% !important;
      padding: 0 !important;
      -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
      animation: immersive-translate-loading-animation 0.6s infinite linear !important;
    }

    @-webkit-keyframes immersive-translate-loading-animation {
      from {
        -webkit-transform: rotate(0deg);
      }

      to {
        -webkit-transform: rotate(359deg);
      }
    }

    @keyframes immersive-translate-loading-animation {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(359deg);
      }
    }

    .immersive-translate-input-loading {
      --loading-color: #f78fb6;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      display: block;
      margin: 12px auto;
      position: relative;
      color: white;
      left: -100px;
      box-sizing: border-box;
      animation: immersiveTranslateShadowRolling 1.5s linear infinite;
    }

    @keyframes immersiveTranslateShadowRolling {
      0% {
        box-shadow: 0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0),
          0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
      }

      12% {
        box-shadow: 100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0),
          0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
      }

      25% {
        box-shadow: 110px 0 var(--loading-color), 100px 0 var(--loading-color),
          0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
      }

      36% {
        box-shadow: 120px 0 var(--loading-color), 110px 0 var(--loading-color),
          100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0);
      }

      50% {
        box-shadow: 130px 0 var(--loading-color), 120px 0 var(--loading-color),
          110px 0 var(--loading-color), 100px 0 var(--loading-color);
      }

      62% {
        box-shadow: 200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color),
          120px 0 var(--loading-color), 110px 0 var(--loading-color);
      }

      75% {
        box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
          130px 0 var(--loading-color), 120px 0 var(--loading-color);
      }

      87% {
        box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
          200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color);
      }

      100% {
        box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
          200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0);
      }
    }

    .immersive-translate-toast {
      display: flex;
      position: fixed;
      z-index: 2147483647;
      left: 0;
      right: 0;
      top: 1%;
      width: fit-content;
      padding: 12px 20px;
      margin: auto;
      overflow: auto;
      background: #fef6f9;
      box-shadow: 0px 4px 10px 0px rgba(0, 10, 30, 0.06);
      font-size: 15px;
      border-radius: 8px;
      color: #333;
    }

    .immersive-translate-toast-content {
      display: flex;
      flex-direction: row;
      align-items: center;
    }

    .immersive-translate-toast-hidden {
      margin: 0 20px 0 72px;
      text-decoration: underline;
      cursor: pointer;
    }

    .immersive-translate-toast-close {
      color: #666666;
      font-size: 20px;
      font-weight: bold;
      padding: 0 10px;
      cursor: pointer;
    }

    @media screen and (max-width: 768px) {
      .immersive-translate-toast {
        top: 0;
        padding: 12px 0px 0 10px;
      }

      .immersive-translate-toast-content {
        flex-direction: column;
        text-align: center;
      }

      .immersive-translate-toast-hidden {
        margin: 10px auto;
      }
    }

    .immersive-translate-modal {
      display: none;
      position: fixed;
      z-index: 2147483647;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgb(0, 0, 0);
      background-color: rgba(0, 0, 0, 0.4);
      font-size: 15px;
    }

    .immersive-translate-modal-content {
      background-color: #fefefe;
      margin: 10% auto;
      padding: 40px 24px 24px;
      border: 1px solid #888;
      border-radius: 10px;
      width: 80%;
      max-width: 270px;
      font-family: system-ui, -apple-system, "Segoe UI", "Roboto", "Ubuntu",
        "Cantarell", "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
        "Segoe UI Symbol", "Noto Color Emoji";
      position: relative;
    }

    @media screen and (max-width: 768px) {
      .immersive-translate-modal-content {
        margin: 50% auto !important;
      }
    }

    .immersive-translate-modal .immersive-translate-modal-content-in-input {
      max-width: 500px;
    }

    .immersive-translate-modal-content-in-input .immersive-translate-modal-body {
      text-align: left;
      max-height: unset;
    }

    .immersive-translate-modal-title {
      text-align: center;
      font-size: 16px;
      font-weight: 700;
      color: #333333;
    }

    .immersive-translate-modal-body {
      text-align: center;
      font-size: 14px;
      font-weight: 400;
      color: #333333;
      word-break: break-all;
      margin-top: 24px;
    }

    @media screen and (max-width: 768px) {
      .immersive-translate-modal-body {
        max-height: 250px;
        overflow-y: auto;
      }
    }

    .immersive-translate-close {
      color: #666666;
      position: absolute;
      right: 16px;
      top: 16px;
      font-size: 20px;
      font-weight: bold;
    }

    .immersive-translate-close:hover,
    .immersive-translate-close:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }

    .immersive-translate-modal-footer {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 24px;
    }

    .immersive-translate-btn {
      width: fit-content;
      color: #fff;
      background-color: #ea4c89;
      border: none;
      font-size: 16px;
      margin: 0 8px;
      padding: 9px 30px;
      border-radius: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .immersive-translate-btn:hover {
      background-color: #f082ac;
    }

    .immersive-translate-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .immersive-translate-btn:disabled:hover {
      background-color: #ea4c89;
    }

    .immersive-translate-cancel-btn {
      /* gray color */
      background-color: rgb(89, 107, 120);
    }

    .immersive-translate-cancel-btn:hover {
      background-color: hsl(205, 20%, 32%);
    }

    .immersive-translate-action-btn {
      background-color: transparent;
      color: #ea4c89;
      border: 1px solid #ea4c89;
    }

    .immersive-translate-btn svg {
      margin-right: 5px;
    }

    .immersive-translate-link {
      cursor: pointer;
      user-select: none;
      -webkit-user-drag: none;
      text-decoration: none;
      color: #007bff;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
    }

    .immersive-translate-primary-link {
      cursor: pointer;
      user-select: none;
      -webkit-user-drag: none;
      text-decoration: none;
      color: #ea4c89;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
    }

    .immersive-translate-modal input[type="radio"] {
      margin: 0 6px;
      cursor: pointer;
    }

    .immersive-translate-modal label {
      cursor: pointer;
    }

    .immersive-translate-close-action {
      position: absolute;
      top: 2px;
      right: 0px;
      cursor: pointer;
    }

    .imt-image-status {
      background-color: rgba(0, 0, 0, 0.5) !important;
      display: flex !important;
      flex-direction: column !important;
      align-items: center !important;
      justify-content: center !important;
      border-radius: 16px !important;
    }

    .imt-image-status img,
    .imt-image-status svg,
    .imt-img-loading {
      width: 28px !important;
      height: 28px !important;
      margin: 0 0 8px 0 !important;
      min-height: 28px !important;
      min-width: 28px !important;
      position: relative !important;
    }

    .imt-img-loading {
      background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAAAtFBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////oK74hAAAAPHRSTlMABBMIDyQXHwyBfFdDMSw+OjXCb+5RG51IvV/k0rOqlGRM6KKMhdvNyZBz9MaupmxpWyj437iYd/yJVNZeuUC7AAACt0lEQVRIx53T2XKiUBCA4QYOiyCbiAsuuGBcYtxiYtT3f6/pbqoYHVFO5r+iivpo6DpAWYpqeoFfr9f90DsYAuRSWkFnPO50OgR9PwiCUFcl2GEcx+N/YBh6pvKaefHlUgZd1zVe0NbYcQjGBfzrPE8Xz8aF+71D8gG6DHFPpc4a7xFiCDuhaWgKgGIJQ3d5IMGDrpS4S5KgpIm+en9f6PlAhKby4JwEIxlYJV9h5k5nee9GoxHJ2IDSNB0dwdad1NAxDJ/uXDHYmebdk4PdbkS58CIVHdYSUHTYYRWOJblWSyu2lmy3KNFVJNBhxcuGW4YBVCbYGRZwIooipHsNqjM4FbgOQqQqSKQQU9V8xmi1QlgHqQQ6DDBvRUVCDirs+EzGDGOQTCATgtYTnbCVLgsVgRE0T1QE0qHCFAht2z6dLvJQs3Lo2FQoDxWNUiBhaP4eRgwNkI+dAjVOA/kUrIDwf3CG8NfNOE0eiFotSuo+rBiq8tD9oY4Qzc6YJw99hl1wzpQvD7ef2M8QgnOGJfJw+EltQc+oX2yn907QB22WZcvlUpd143dqQu+8pCJZuGE4xCuPXJqqcs5sNpsI93Rmzym1k4Npk+oD1SH3/a3LOK/JpUBpWfqNySxWzCfNCUITuDG5dtuphrUJ1myeIE9bIsPiKrfqTai5WZxbhtNphYx6GEIHihyGFTI69lje/rxajdh0s0msZ0zYxyPLhYCb1CyHm9Qsd2H37Y3lugVwL9kNh8Ot8cha6fUNQ8nuXi5z9/ExsAO4zQrb/ev1yrCB7lGyQzgYDGuxq1toDN/JGvN+HyWNHKB7zEoK+PX11e12G431erGYzwmytAWU56fkMHY5JJnDRR2eZji3AwtIcrEV8Cojat/BdQ7XOwGV1e1hDjGGjXbdArm8uJZtCH5MbcctVX8A1WpqumJHwckAAAAASUVORK5CYII=");
      background-size: 28px 28px;
      animation: image-loading-rotate 1s linear infinite !important;
    }

    .imt-image-status span {
      color: var(--bg-2, #fff) !important;
      font-size: 14px !important;
      line-height: 14px !important;
      font-weight: 500 !important;
      font-family: "PingFang SC", Arial, sans-serif !important;
    }

    .summary-container {
      margin: 2rem 0;
      padding: 1.5rem;
      background: #f8f9fa;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .summary-container h3 {
      color: #2c3e50;
      border-bottom: 2px solid #3498db;
      padding-bottom: 0.5rem;
      margin-bottom: 1.5rem;
    }

    .grid {
      display: grid;
      gap: 1.5rem;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }

    .card {
      background: white;
      padding: 1.2rem;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .card h4 {
      color: #3498db;
      margin: 0 0 1rem 0;
      font-size: 1.1rem;
    }

    .card ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .card li {
      padding: 0.3rem 0;
      border-bottom: 1px solid #eee;
    }

    .meta {
      margin-top: 0.8rem;
      font-size: 0.9em;
      color: #7f8c8d;
    }

    .detail {
      color: #95a5a6;
      font-size: 0.9em;
      margin-top: 0.5rem;
    }

    @keyframes image-loading-rotate {
      from {
        transform: rotate(360deg);
      }

      to {
        transform: rotate(0deg);
      }
    }

    .result-container {
      background-color: #f9f9f9;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .title {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 20px;
      color: #333;
    }

    .bazi-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }

    .bazi-table th,
    .bazi-table td {
      padding: 10px;
      border: 1px solid #ddd;
      text-align: center;
    }

    .bazi-table th {
      background-color: #f5f5f5;
      font-weight: bold;
    }

    .additional-info {
      list-style-type: none;
      padding: 0;
    }

    .additional-info li {
      margin-bottom: 10px;
      font-size: 16px;
      color: #555;
    }

    .summary-container {
      margin-top: 30px;
    }

    .pillars-section h3 {
      font-size: 20px;
      margin-bottom: 15px;
      color: #333;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }

    .card {
      background-color: #fff;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .card h4 {
      font-size: 18px;
      margin-bottom: 10px;
      color: #333;
    }

    .card ul {
      list-style-type: none;
      padding: 0;
    }

    .card ul li {
      margin-bottom: 5px;
      font-size: 14px;
      color: #555;
    }

    .card p {
      font-size: 16px;
      margin-bottom: 10px;
      color: #333;
    }

    .card .meta {
      font-size: 14px;
      color: #777;
    }

    .summary-text {
      margin-top: 20px;
    }

    .text-area {
      width: 100%;
      /* max-width: 900px; */
      min-height: 180px;
      padding: 16px;
      margin: 20px auto;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      font-size: 15px;
      line-height: 1.6;
      color: #2d3748;
      background-color: #f8f9fa;
      resize: vertical;
      transition: all 0.3s ease;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .text-area:hover {
      border-color: #a0aec0;
    }

    .text-area:focus {
      outline: none;
      border-color: #4299e1;
      box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
    }
  </style>

  <style>
    /* 基础样式 */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f9f9f9;
      color: #333;
      margin: 0;
      padding: 20px;
    }

    h2 {
      color: #444;
      text-align: center;
    }

    p {
      text-align: center;
      color: #666;
    }

    /* 表单容器 */
    .form-container {
      max-width: 400px;
      margin: 0 auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    /* 表单组 */
    .form-group {
      display: flex;
      flex-direction: column;
      margin-bottom: 15px;
    }

    .form-group label {
      font-weight: bold;
      margin-bottom: 5px;
      color: #555;
    }

    /* 输入框和下拉菜单 */
    .form-group input,
    .form-group select {
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 14px;
      transition: border-color 0.3s ease;
    }

    .form-group input:focus,
    .form-group select:focus {
      border-color: #007bff;
      outline: none;
    }

    /* 按钮 */
    button {
      width: 100%;
      padding: 10px;
      background-color: #007bff;
      color: #fff;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #0056b3;
    }

    /* 响应式设计 */
    @media (max-width: 480px) {
      .form-container {
        padding: 15px;
      }

      .form-group input,
      .form-group select {
        font-size: 12px;
      }

      button {
        font-size: 14px;
      }
    }
  </style>
  <style>
    .yun-table {
      border-collapse: collapse;
      margin: 1rem 0;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      min-width: 800px;
      box-shadow: 0 1px 10px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
      overflow: hidden;
    }

    .yun-table td {
      padding: 12px 15px;
      text-align: center;
      border: 1px solid #e0e0e0;
      transition: all 0.2s;
      cursor: pointer;
    }

    .yun-table td:first-child {
      font-weight: 600;
      background-color: #f8f9fa;
      width: 100px;
    }

    .yun-table tr:nth-child(even) {
      background-color: #fafafa;
    }

    .yun-table td.active {
      background-color: #fff3e0;
      font-weight: 600;
      color: #ef6c00;
      position: relative;
    }

    .yun-table td.active::after {
      content: "★";
      position: absolute;
      right: 2px;
      top: 0;
      font-size: 12px;
    }

    .yun-table td:hover {
      background-color: #fff8e1;
    }

    .table-caption {
      color: #999;
      font-size: 0.9em;
      margin-top: 0.5rem;
    }
  </style>
  <style>
    .spell-card {
      background: linear-gradient(145deg, #fff9f0, #f0e6d3);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 1rem 0;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      transition: transform 0.2s;
      position: relative;
      border-left: 5px solid #c53d13;
    }

    .spell-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }

    .spell-title {
      color: #c53d13;
      font-size: 1.4em;
      margin-bottom: 0.8rem;
      font-weight: bold;
      letter-spacing: 1px;
    }

    .spell-content {
      color: #5a4d41;
      font-size: 1.1em;
      line-height: 1.6;
      white-space: pre-line;
    }

    .copy-notice {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 8px 20px;
      border-radius: 20px;
      font-size: 0.9em;
      display: none;
      animation: fade 1.5s;
    }

    @keyframes fade {
      0% {
        opacity: 0;
      }

      20% {
        opacity: 1;
      }

      80% {
        opacity: 1;
      }

      100% {
        opacity: 0;
      }
    }

    .watermark {
      position: fixed;
      bottom: 20px;
      right: 20px;
      color: rgba(0, 0, 0, 0.1);
      font-size: 1.2em;
      transform: rotate(-15deg);
    }
  </style>

  <style>
    .meihua-container {
      background: linear-gradient(145deg, #f6f8fa, #ffffff);
      border-radius: 15px;
      padding: 2rem;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    }

    .meihua-title {
      color: #2c3e50;
      text-align: center;
      font-size: 1.8rem;
      margin-bottom: 2rem;
      font-weight: 600;
    }

    .meihua-wrapper {
      max-width: 500px;
      margin: 0 auto;
    }

    .meihua-form {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .meihua-description {
      color: #636e72;
      line-height: 1.6;
      text-align: center;
      font-size: 0.95rem;
      margin-bottom: 1rem;
    }

    .input-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .input-group label {
      color: #34495e;
      font-size: 0.9rem;
      font-weight: 500;
    }

    .meihua-input {
      padding: 0.8rem 1rem;
      border: 2px solid #e9ecef;
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s ease;
      width: 100%;
    }

    .meihua-input:focus {
      border-color: #74b9ff;
      outline: none;
      box-shadow: 0 0 0 3px rgba(116, 185, 255, 0.1);
    }

    .meihua-button {
      background: linear-gradient(145deg, #74b9ff, #0984e3);
      color: white;
      border: none;
      padding: 1rem 2rem;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      margin-top: 1rem;
    }

    .meihua-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(9, 132, 227, 0.2);
    }

    .meihua-button:active {
      transform: translateY(0);
    }

    .meihua-result {
      margin-top: 1.5rem;
      padding: 1rem;
      border-radius: 8px;
      background-color: #f8f9fa;
      font-size: 0.95rem;
      line-height: 1.6;
      color: #2d3436;
    }

    .meihua-result .moving {
      color: #e17055;
      font-weight: 500;
    }

    @media (max-width: 768px) {
      .meihua-container {
        padding: 1.5rem;
      }
      
      .meihua-title {
        font-size: 1.5rem;
      }
      
      .meihua-button {
        padding: 0.8rem 1.5rem;
      }
    }
  </style>
</head>

<body>      
  <div class="article markdown-body">
    
    <h2 id="八字排盘">排盘 ٩(^ᴗ^)۶</h2>
    <p>请填写阳历（公历）时间：</p>
 
    <form class="form-container">

      <div class="form-group">
        <label for="year">年：</label>
        <input id="year" type="number" min="1900" max="2100" required>
      </div>
      <div class="form-group">
        <label for="month">月：</label>
        <input id="month" type="number" min="1" max="12" required>
      </div>
      <div class="form-group">
        <label for="day">日：</label>
        <input id="day" type="number" min="1" max="31" required>
      </div>
      <div class="form-group">
        <label for="hour">时：</label>
        <input id="hour" type="number" min="0" max="23" placeholder="0到23" required>
      </div>
      <div class="form-group">
        <label for="minute">分：</label>
        <input id="minute" type="number" min="0" max="59" placeholder="0到59" required>
      </div>
      <div class="form-group">
        <label for="gender">性别：</label>
        <select id="gender" required>
          <option value="1">男</option>
          <option value="0">女</option>
        </select>
      </div>
      <div class="form-group">
        <label for="sect">子时流派：</label>
        <select id="sect" required>
          <option value="2">流派2：晚子时日柱算当天</option>
          <option value="1">流派1：晚子时日柱算明天</option>
        </select>
      </div>   
      <div class="form-group">
        <label for="yunSect">起运流派：</label>
        <select id="yunSect" required>
          <option value="1">流派1：3天=1年，1天=4月，1时辰=10天</option>
          <option value="2">流派2：4320分=1年，360分=1月，12分=1天，1分=2小时</option>
        </select>
      </div>
      <br><img src="static/picture/meme.gif" alt="meme">
    </form>
    

    <div class="line" id="result">
    </div>
    <table class="yun-table" id="yun">
      <tbody>
        <!-- 大运部分 -->
        <tr>
          <td rowspan="3">大运</td>
          <td>2025</td>
          <td>2025</td>
          <td>2035</td>
          <td>2045</td>
          <td>2055</td>
          <td>2065</td>
          <td>2075</td>
          <td>2085</td>
          <td>2095</td>
          <td>2105</td>
        </tr>
        <tr>
          <td>1</td>
          <td>1</td>
          <td>11</td>
          <td>21</td>
          <td>31</td>
          <td>41</td>
          <td>51</td>
          <td>61</td>
          <td>71</td>
          <td>81</td>
        </tr>
        <tr>
          <td></td>
          <td class="active">丁丑</td>
          <td>丙子</td>
          <td>乙亥</td>
          <td>甲戌</td>
          <td>癸酉</td>
          <td>壬申</td>
          <td>辛未</td>
          <td>庚午</td>
          <td>己巳</td>
        </tr>

        <!-- 流年部分 -->
        <tr>
          <td rowspan="3">流年</td>
          <td>2025</td>
          <td>2026</td>
          <td>2027</td>
          <td>2028</td>
          <td>2029</td>
          <td>2030</td>
          <td>2031</td>
          <td>2032</td>
          <td>2033</td>
          <td>2034</td>
        </tr>
        <tr>
          <td>1</td>
          <td>2</td>
          <td>3</td>
          <td>4</td>
          <td>5</td>
          <td>6</td>
          <td>7</td>
          <td>8</td>
          <td>9</td>
          <td>10</td>
        </tr>
        <tr>
          <td class="active">乙巳</td>
          <td>丙午</td>
          <td>丁未</td>
          <td>戊申</td>
          <td>己酉</td>
          <td>庚戌</td>
          <td>辛亥</td>
          <td>壬子</td>
          <td>癸丑</td>
          <td>甲寅</td>
        </tr>

        <!-- 小运部分 -->
        <tr>
          <td>小运</td>
          <td>丙戌</td>
          <td>乙酉</td>
          <td>甲申</td>
          <td>癸未</td>
          <td>壬午</td>
          <td>辛巳</td>
          <td>庚辰</td>
          <td>己卯</td>
          <td>戊寅</td>
          <td>丁丑</td>
        </tr>
      </tbody>
    </table>

    <table class="yun-table" id="liu-yue">
      <tbody>
        <!-- 流月部分 -->
        <tr>
          <td rowspan="2">流月</td>
          <td>正月</td>
          <td>二月</td>
          <td>三月</td>
          <td>四月</td>
          <td>五月</td>
          <td>六月</td>
          <td>七月</td>
          <td>八月</td>
          <td>九月</td>
          <td>十月</td>
          <td>冬月</td>
          <td>腊月</td>
        </tr>
        <tr>
          <td>戊寅</td>
          <td>己卯</td>
          <td>庚辰</td>
          <td>辛巳</td>
          <td>壬午</td>
          <td>癸未</td>
          <td>甲申</td>
          <td>乙酉</td>
          <td>丙戌</td>
          <td>丁亥</td>
          <td>戊子</td>
          <td>己丑</td>
        </tr>
      </tbody>
    </table>

    <div class="table-caption">注：可点击上表中橙色格子切换。</div>
  </div>
  <script src="static/js/jquery.min.js"></script>
  <script src="static/js/highlight.min.js"></script>
  <script src="static/js/marked.min.js"></script>
  <script src="static/js/iztro.min.js"></script>
  <script src="static/js/lunar.js"></script>


  <script>
    function copyText() {
      // 获取文本框元素
      const textArea = document.getElementById('textInput');

      // 选中文本
      textArea.select();

      try {
        // 执行复制命令
        document.execCommand('copy');

      } catch (err) {
        console.error('复制失败:', err);
        alert('复制失败，请手动复制');
      }
    }
    function copyText2() {
      // 获取文本框元素
      const textArea = document.getElementById('textInput2');

      // 选中文本
      textArea.select();

      try {
        // 执行复制命令
        document.execCommand('copy');

      } catch (err) {
        console.error('复制失败:', err);
        alert('复制失败，请手动复制');
      }
    }
  </script>
  <script>
    (function () {
      var INDEX = {
        daYun: 0,
        liuNian: 0
      };
      var today = Solar.fromDate(new Date());
      $('#year').val(today.getYear());
      $('#month').val(today.getMonth());
      $('#day').val(today.getDay());
      $('#hour').val(today.getHour());
      $('#minute').val(today.getMinute());

      var throttle = function (fn, delay, atleast) {
        var timer = null;
        var previous = null;
        return function () {
          var now = +new Date();
          if (!previous) previous = now;
          if (atleast && now - previous > atleast) {
            fn();
            previous = now;
            clearTimeout(timer);
          } else {
            clearTimeout(timer);
            timer = setTimeout(function () {
              fn();
              previous = null;
            }, delay);
          }
        }
      };

      var onChange = throttle(function () {
        compute();
      }, 20, 50);

      var compute = function () {
        try {
          // 获取输入值
          var year = $('#year').val();
          var month = $('#month').val();
          var monthPad = month.padStart(2, '0'); // 月份补零
          var day = $('#day').val();
          var dayPad = day.padStart(2, '0');     // 日期补零
          var hour = $('#hour').val();
          var minute = $('#minute').val();
          var gender = parseInt($('#gender').val());
          var sect = parseInt($('#sect').val());
          var yunSect = parseInt($('#yunSect').val());

          // 输入验证
          if (year < 1 || year > 9999 || month < 1 || month > 12 || day < 1 || day > 31 || hour < 0 || hour > 23 || minute < 0 || minute > 59) {
            return;
          }
          //ziwei
          // 核心转换逻辑
          var solarDateStr = `${year}-${monthPad}-${dayPad}`;  // 组合标准日期

          // 根据小时和分钟计算对应的时间段索引
          var timeIndex = -1; // 默认值

          if (hour == 0) {
            timeIndex = 0; // 早子时 (00:00~01:00)
          } else if (hour >= 1 && hour < 3) {
            timeIndex = 1; // 丑时 (01:00~03:00)
          } else if (hour >= 3 && hour < 5) {
            timeIndex = 2; // 寅时 (03:00~05:00)
          } else if (hour >= 5 && hour < 7) {
            timeIndex = 3; // 卯时 (05:00~07:00)
          } else if (hour >= 7 && hour < 9) {
            timeIndex = 4; // 辰时 (07:00~09:00)
          } else if (hour >= 9 && hour < 11) {
            timeIndex = 5; // 巳时 (09:00~11:00)
          } else if (hour >= 11 && hour < 13) {
            timeIndex = 6; // 午时 (11:00~13:00)
          } else if (hour >= 13 && hour < 15) {
            timeIndex = 7; // 未时 (13:00~15:00)
          } else if (hour >= 15 && hour < 17) {
            timeIndex = 8; // 申时 (15:00~17:00)
          } else if (hour >= 17 && hour < 19) {
            timeIndex = 9; // 酉时 (17:00~19:00)
          } else if (hour >= 19 && hour < 21) {
            timeIndex = 10; // 戌时 (19:00~21:00)
          } else if (hour >= 21 && hour < 23) {
            timeIndex = 11; // 亥时 (21:00~23:00)
          } else if (hour == 23) {
            timeIndex = 12; // 晚子时 (23:00~00:00)
          }


          var genderText = gender === 1 ? '男' : '女';

          var fixLeap = yunSect === 1;                         // 闰月调整转换

          var astrolabe = iztro.astro.bySolar(solarDateStr, timeIndex, genderText, true, 'zh-CN');

          // var astrolabe = iztro.astro.bySolar('2004-01-17', 1, '男', true, 'zh-CN');

          // ziwei

          function convertKeyToChinese(original) {
            const keyMap = {
              gender: '性别',
              solarDate: '阳历日期',
              lunarDate: '农历日期',
              chineseDate: '生辰八字',
              time: '时辰',
              timeRange: '时段',
              zodiac: '生肖',
              earthlyBranchOfBodyPalace: '身宫地支',
              earthlyBranchOfSoulPalace: '命宫地支',
              soul: '命主',
              body: '身主',
              fiveElementsClass: '五行局',
              palaces: '十二宫',
              name: '宫位名称',
              heavenlyStem: '天干',
              earthlyBranch: '地支',
              majorStars: '主星',
              minorStars: '辅星',
              adjectiveStars: '杂曜',
              brightness: '亮度',
              mutagen: '四化',
              changsheng12: '长生十二神',
              boshi12: '博士十二神',
              jiangqian12: '将前十二神',
              suiqian12: '岁前十二神',
              decadal: '大限',
              ages: '小限'
            };

            function translateKeys(obj) {
              if (Array.isArray(obj)) {
                return obj.map(item => translateKeys(item));
              }

              if (typeof obj !== 'object' || obj === null) return obj;

              return Object.keys(obj).reduce((acc, key) => {
                const newKey = keyMap[key] || key;
                acc[newKey] = translateKeys(obj[key]);
                return acc;
              }, {});
            }

            // 提取核心信息
            const coreData = {
              基本信息: {
                性别: original.gender,
                阳历日期: original.solarDate,
                农历日期: original.lunarDate,
                生辰八字: original.chineseDate,
                出生时辰: original.time,
                生肖: original.zodiac,
                五行局: original.fiveElementsClass,
                命主: original.soul,
                身主: original.body,
                命宫地支: original.earthlyBranchOfSoulPalace,
                身宫地支: original.earthlyBranchOfBodyPalace
              },
              宫位信息: original.palaces.map(palace => ({
                宫位名称: palace.name,
                天干地支: `${palace.heavenlyStem}${palace.earthlyBranch}`,
                主星: palace.majorStars.map(star => ({
                  星曜: star.name,
                  亮度: star.brightness,
                  四化: star.mutagen
                })),
                吉星: palace.minorStars.filter(s => s.type === 'soft').map(s => s.name),
                煞星: palace.minorStars.filter(s => s.type === 'tough').map(s => s.name),
                杂曜: palace.adjectiveStars.map(s => s.name),
                长生十二神: palace.changsheng12,
                大限: {
                  起止年龄: palace.decadal.range,
                  天干地支: `${palace.decadal.heavenlyStem}${palace.decadal.earthlyBranch}`
                },
                小限年龄: palace.ages
              }))
            };

            return translateKeys(coreData);
          }

          // 使用示例
          const originalData = astrolabe;
          const chineseData = convertKeyToChinese(originalData);
          const ziwei = JSON.stringify(chineseData, null, 0)
          // console.log(JSON.stringify(chineseData, null, 2));


          // 计算八字
          var solar = Solar.fromYmdHms(year, month, day, hour, minute, 0);
          var lunar = solar.getLunar();
          var bazi = lunar.getEightChar();
          bazi.setSect(sect);
          var yun = bazi.getYun(gender, yunSect);
          // console.log(astrolabe)

          // 构造结果HTML
          var resultHTML = `
            <div class="result-container">
                <div class="title">生辰八字命盘</div>
                <table class="bazi-table">
                    <tbody>
                        <tr>
                            <th>公历</th>
                            <td>${solar.getYear()}年</td>
                            <td>${solar.getMonth()}月</td>
                            <td>${solar.getDay()}日</td>
                            <td>${lunar.getTimeZhi()}时</td>
                        </tr>
                        <tr>
                            <th>天干</th>
                            <td>${bazi.getYearShiShenGan()}</td>
                            <td>${bazi.getMonthShiShenGan()}</td>
                            <td>${bazi.getDayShiShenGan()}</td>
                            <td>${bazi.getTimeShiShenGan()}</td>
                        </tr>
                        <tr>
                            <th>八字</th>
                            <td>${bazi.getYear()}</td>
                            <td>${bazi.getMonth()}</td>
                            <td>${bazi.getDay()}</td>
                            <td>${bazi.getTime()}</td>
                        </tr>
                        <tr>
                            <th>地支</th>
                            <td>${bazi.getYearShiShenZhi()[0]}</td>
                            <td>${bazi.getMonthShiShenZhi()[0]}</td>
                            <td>${bazi.getDayShiShenZhi()[0]}</td>
                            <td>${bazi.getTimeShiShenZhi()[0]}</td>
                        </tr>
                        <tr>
                            <th>五行</th>
                            <td>${bazi.getYearWuXing()}</td>
                            <td>${bazi.getMonthWuXing()}</td>
                            <td>${bazi.getDayWuXing()}</td>
                            <td>${bazi.getTimeWuXing()}</td>
                        </tr>
                        <tr>
                            <th>纳音</th>
                            <td>${bazi.getYearNaYin()}</td>
                            <td>${bazi.getMonthNaYin()}</td>
                            <td>${bazi.getDayNaYin()}</td>
                            <td>${bazi.getTimeNaYin()}</td>
                        </tr>
                        <tr>
                            <th>地势</th>
                            <td>${bazi.getYearDiShi()}</td>
                            <td>${bazi.getMonthDiShi()}</td>
                            <td>${bazi.getDayDiShi()}</td>
                            <td>${bazi.getTimeDiShi()}</td>
                        </tr>
                    </tbody>
                </table>
                <ul class="additional-info">
                    <li>胎元：${bazi.getTaiYuan()} (${bazi.getTaiYuanNaYin()})</li>
                    <li>胎息：${bazi.getTaiXi()} (${bazi.getTaiXiNaYin()})</li>
                    <li>命宫：${bazi.getMingGong()} (${bazi.getMingGongNaYin()})</li>
                    <li>身宫：${bazi.getShenGong()} (${bazi.getShenGongNaYin()})</li>
                    <li>日空：${bazi.getDayXunKong()}</li>
                    <li>起运：出生后${yun.getStartYear() > 0 ? yun.getStartYear() + '年' : ''}${yun.getStartMonth() > 0 ? yun.getStartMonth() + '个月' : ''}${yun.getStartDay() > 0 ? yun.getStartDay() + '天' : ''}后起运，起运公历：${yun.getStartSolar().toYmd()}</li>
                </ul>
            </div>
        `;

          $('#result').html(resultHTML);

          // 大运、流年、小运处理
          var daYun = yun.getDaYun();
          if (INDEX.daYun >= daYun.length) {
            INDEX.daYun = 0;
          }
          var tds = $('#yun td');
          tds.removeClass('active').html('');
          tds.eq(0).html('大运');
          tds.eq(31).html('流年');
          tds.eq(62).html('小运');
          for (var i = 0, j = daYun.length; i < j; i++) {
            var d = daYun[i];
            tds.eq(1 + i).html(d.getStartYear());
            tds.eq(11 + i).html(d.getStartAge());
            tds.eq(21 + i).html(d.getGanZhi());
          }
          tds.eq(21 + INDEX.daYun).addClass('active');

          var liuNian = daYun[INDEX.daYun].getLiuNian();
          if (INDEX.liuNian >= liuNian.length) {
            INDEX.liuNian = 0;
          }
          for (var i = 0, j = liuNian.length; i < j; i++) {
            var d = liuNian[i];
            tds.eq(32 + i).html(d.getYear());
            tds.eq(42 + i).html(d.getAge());
            tds.eq(52 + i).html(d.getGanZhi());
          }
          tds.eq(52 + INDEX.liuNian).addClass('active');

          var xiaoYun = daYun[INDEX.daYun].getXiaoYun();
          for (var i = 0, j = xiaoYun.length; i < j; i++) {
            var d = xiaoYun[i];
            tds.eq(63 + i).html(d.getGanZhi());
          }

          tds = $('#liu-yue td');
          tds.removeClass('active').html('');
          tds.eq(0).html('流月');

          try {
            var liuYue = liuNian[INDEX.liuNian].getLiuYue();
            for (var i = 0, j = liuYue.length; i < j; i++) {
              var d = liuYue[i];
              tds.eq(1 + i).html(d.getMonthInChinese() + '月');
              tds.eq(13 + i).html(d.getGanZhi());
            }
          } catch (ex) {
            if (INDEX.daYun == 0) {
              INDEX.daYun = 1;
              onChange();
            }
          }

          // 添加总结信息
          var summary = `
            <div class="summary-container">
                <div class="pillars-section">
                    <h3>核心命理信息</h3>
                    <div class="grid">
                        <div class="card">
                            <h4>四柱</h4>
                            <ul>
                                <li>年柱：${bazi.getYear()}</li>
                                <li>月柱：${bazi.getMonth()}</li>
                                <li>日柱：${bazi.getDay()}</li>
                                <li>时柱：${bazi.getTime()}</li>
                            </ul>
                        </div>
                        <div class="card">
                            <h4>起运时间</h4>
                            <p>${yun.getStartSolar().toYmd()}</p>
                            <div class="detail">
                                出生后：${yun.getStartYear() > 0 ? yun.getStartYear() + '年' : ''}${yun.getStartMonth() > 0 ? yun.getStartMonth() + '个月' : ''}${yun.getStartDay() > 0 ? yun.getStartDay() + '天' : ''}
                            </div>
                        </div>
                        <div class="card">
                            <h4>当前大运</h4>
                            ${daYun.length > 0 ? `
                                <p>${daYun[INDEX.daYun].getGanZhi()}</p>
                                <div class="meta">
                                    <span>${daYun[INDEX.daYun].getStartYear()}年开始</span>
                                    <span>（${daYun[INDEX.daYun].getStartAge()}岁）</span>
                                </div>
                            ` : '无大运数据'}
                        </div>
                        <div class="card">
                            <h4>当前流年</h4>
                            ${liuNian.length > 0 ? `
                                <p>${liuNian[INDEX.liuNian].getGanZhi()}</p>
                                <div class="meta">
                                    <span>${liuNian[INDEX.liuNian].getYear()}年</span>
                                    <span>（${liuNian[INDEX.liuNian].getAge()}岁）</span>
                                </div>
                            ` : '无流年数据'}
                        </div>
                    </div>
                </div>
            </div>
        `;

          $('#result').append(summary);

          // 构造四柱、起运、大运和流年的文本信息
          var summaryText = `
            <div class="summary-text">
                <h3>您的赛博咒语（【】内最最最核心，可迁移至其他咒语使用）：</h3>
                <textarea class="text-area" id="textInput">
请分析此命盘，
【四柱为 ${bazi.getYear()} ${bazi.getMonth()} ${bazi.getDay()} ${bazi.getTime()}，${year}年生，性别：${genderText}
出生后${yun.getStartYear()}年${yun.getStartMonth()}个月${yun.getStartDay()}天起运，
大运为 ${yun.getDaYun().map((d, index) => {
            const startAge = d.getStartAge();
            const endAge = startAge + 9; // 10岁为一个周期
            return `${d.getGanZhi()} (${startAge}岁 - ${endAge}岁)`;
          }).join('、')}
流年为 ${yun.getDaYun()[INDEX.daYun].getLiuNian().map(d => `${d.getYear()}年 ${d.getGanZhi()}`).join('、')}】
仅仅用盲派技法步骤深度分析, 不过多考虑身强身弱, 而是分析十神关系, 体用平衡。注意逻辑合理, 综合各种信息文本判断准确的关系模型, 交叉验证, 多次迭代后输出最终正确的结果, 并用通俗的语言分析此命的正缘, 事业, 健康等具体数据
                </textarea>
                <button class="copy-button" onclick="copyText()">复制文本</button>
<h3>您的赛博咒语2：</h3>
                <textarea class="text-area" id="textInput2">你现在是一个中国传统八字命理的专业研究人员，作为紫微斗数研究院资深研究员，精通《紫微斗数全书》《斗数秘仪》《十八飞星》等典籍。请基于以下信息进行专业紫微斗数命盘分析：
${ziwei}
【解析要求】

重点宫位分析：
福德宫:思想内涵/潜意识
命宫：性格特质/先天运势
官禄宫：事业方向/成就潜力
财帛宫：理财模式/财富格局
夫妻宫：情感模式/婚恋趋势
大限走势：当前十年运程要点
深度解读：

四化星（禄权科忌）对关键宫位的影响
主星组合的吉凶效应（如紫微七杀、太阳太阴等）
流年重要星曜变化提示（未来1-3年）
补充建议：

适合的发展方向/注意事项
化解不利格局的民俗建议
需重点关注的年龄阶段
【输出要求】

专业术语配合白话解释
重要结论用✅❌符号标注
保持逻辑连贯性，避免碎片化信息
涉及负面预测时给出改善建议
                </textarea>
                <button class="copy-button" onclick="copyText2()">复制文本</button>
            </div>
        `;








          $('#result').append(summaryText);

        } catch (e) {
          console.trace(e);
          $('#result').html('');
        }
      };

      compute();


      $('#year').on('input propertychange', onChange);
      $('#month').on('input propertychange', onChange);
      $('#day').on('input propertychange', onChange);
      $('#hour').on('input propertychange', onChange);
      $('#minute').on('input propertychange', onChange);
      $('#gender').on('change', onChange);
      $('#sect').on('change', onChange);
      $('#yunSect').on('change', onChange);

      var tds = $('#yun td');
      tds.each(function (i) {
        $(this).data('index', i);
      });
      tds.on('click', function () {
        var index = $(this).data('index');
        if (index >= 21 && index < 31) {
          INDEX.daYun = index - 21;
          onChange();
        } else if (index >= 52 && index < 62) {
          INDEX.liuNian = index - 52;
          onChange();
        }
      });
    })();
  </script>
  <script>

  </script>
</body>
<div class="summary-container meihua-container">
  <h2 class="meihua-title">梅花易数测今日运势</h2>
  
  <div class="meihua-wrapper">
    <div id="meihua" class="meihua-form">
      <p class="meihua-description">
        心理默念输入三个数字（大于等于0），点击按钮即可自动复制神秘指令，粘贴至deepseek，获取今日运势。
      </p>

      <div class="input-group">
        <label for="num1">请输入第一个数字：</label>
        <input type="number" id="num1" min="1" class="meihua-input" required>
      </div>

      <div class="input-group">
        <label for="num2">请输入第二个数字：</label>
        <input type="number" id="num2" min="1" class="meihua-input" required>
      </div>

      <div class="input-group">
        <label for="num3">请输入第三个数字：</label>
        <input type="number" id="num3" min="1" class="meihua-input" required>
      </div>

      <button onclick="calculate()" class="meihua-button">点击按钮直接复制</button>

      <div id="meihua_result" class="meihua-result"></div>
    </div>
  </div>
</div>
<h2>网络上的其他咒语（原理差不多，自己组合，点击复制）</h2>
<div class="spell-card" onclick="copySpell(this)">
  <div class="spell-title">指令1</div>
  <div class="spell-content">
    你现在是一个中国传统八字命理的专业研究人员，你熟读穷通宝典、三命通会、滴天髓、渊海子平这些书籍。你熟读千里命稿、协纪辨方书、果老星宗、子平真栓、神峰通考等一系列书籍。根据【“排大运分阳年、阴年。阳年：甲丙戊庚壬。阴年：乙丁己辛癸。阳年男，阴年女为顺排，阴年男，阳年女为逆排。具体排法以月干支为基准，进行顺逆。小孩交大运前，以月柱干支为大运十天干：甲乙丙丁戊己庚辛壬癸，十二地支：子丑寅卯辰巳午未申酉戌亥。我的出生是农历
    年 月日，性别，出生地为…，】（这部分替换）请你以一个专业四柱八字研究者的角色，根据以上我所提到的书籍，及相关四柱八字的书籍和经验，告诉我的八字以及对我的八字进行分析。</div>
</div>

<div class="spell-card" onclick="copySpell(this)">
  <div class="spell-title">指令2</div>
  <div class="spell-content">
    你是一个顶尖的八字大师，帮我分析一下我的八字，我是生日出生在✘✘，地点✘✘，性别女，需要严格.按照八字命理的理论和步骤来分析，不用太关注我的迷信什么的，先帮我看一下我的八字和大运流年，请举例2024年之前的重大事件以做验证，我会在你回答后提供相应事实以纠偏，要具体到每个月，谢谢。

    修正指令：我在✘✘年发生了✘✘，请结合这件事修正命盘。</div>
</div>

<div class="spell-card" onclick="copySpell(this)">
  <div class="spell-title">指令3</div>
  <div class="spell-content">第一问：
    你是一个命理学大师，深谙八字及奇门等传统命理方法。我出生于阳/农历xxxx年xx月xx日，xx时xx分，xx市，男/女性。请用奇门遁甲及八字分析我的一生，先帮我回顾我过去十年的三个重大事件，再着重分析整体运势，学业、事业、财运、婚姻等。
    <br>
    第二问： 请你用奇门遁甲的方式，分析我这个大运十年的爱情，婚姻，事业，财运，交友，父母，子女。 以及我这个大运有什么机会点？
    <br>
    第三问： 请你用奇门遁甲的方式，帮我分析 今年xx月的xx事情，和xx，在xx地方，能不能成功？ 如果我想要成功，我应该通过什么样的方式去干预？
  </div>
</div>
<div class="spell-card" onclick="copySpell(this)">
  <div class="spell-title">指令4</div>
  <div class="spell-content">你是一个资深命理师，熟读 《穷通宝鉴《滴天髓》《三命通会》《子平真诠》《千里命稿》《五行精纪》，现在请你对我给出的出生时间做出专业的八字分析： 生辰：阳历 性别： 出生地：
    重点细看人品财运婚姻</div>
</div>
<div class="spell-card" onclick="copySpell(this)">
  <div class="spell-title">指令5</div>
  <div class="spell-content">你现在是一个中国传统八字命理的专业研究人员。 你熟读《穷通宝典》、《 三命通会
    》、《滴天髓》、《渊海子平》这些书籍。你熟读《千里命稿》、《协纪辨方书》、《果老星宗》、《子平真诠》、《神峰通考》一系列书籍。
    根据“排大运分阳年、阴年。阳年：甲丙戊庚壬。阴年：乙丁己辛癸，阳年男，阴年女为顺排，阴年男，阳年女为逆排，具体排法以月干支为基准，进行顺逆。小孩交大运前，以月柱干支为大运。十天干：甲乙丙丁戊己庚辛壬癸，十二地支：子丑寅卯辰巳午未申酉戌亥。请详细分析：生于农历xxxx年xx月xx日，xx时xx分，xx市，男/女性的事业，家庭，婚姻，财运。
  </div>
</div>
<div class="spell-card" onclick="copySpell(this)">
  <div class="spell-title">指令6</div>
  <div class="spell-content">你现在是一个中国传统八字命理的专业研究人员 你熟读穷通宝典，三命通会，滴天髓，渊海子平这些书籍。你熟读千里命稿，协纪辨方书，果老星宗，子平真栓，神峰通考一系列书籍。
    根据“排大运分阳年、阴年。阳年:甲丙戊庚壬。阴年:乙丁己辛癸，阳年男，阴年女为顺排，阴年男，阳年女为逆排，具体排法以月干支为基准，进行顺逆，小孩交大运前，以月柱干支为大运十天干:甲乙丙丁戊已庚辛壬癸，十二地支:子丑寅卯辰巳午未申酉戌亥。请详细分析：生于农历xxxx年xx月xx日，xx时xx分，xx市，男/女性的事业，家庭，婚姻，财运。
  </div>
</div>





<div id="copyNotice" class="copy-notice">已复制到剪贴板</div>
<div class="support-container"
  style="max-width: 400px; margin: 2rem auto; padding: 20px; background: #f8f9fa; border-radius: 12px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
  <h2 style="color: #2d3436; margin-bottom: 1rem; font-family: 'Helvetica Neue', sans-serif;">
    ✨ ↑↑↑不要face地打个广告↓↓↓ ✨
  </h2>
  <p style="color: #636e72; line-height: 1.6; margin-bottom: 1.5rem;">
    AI算卦，纯属娱乐，专业需求，扫码联系<br>
   师承全真龙门派、浏阳茅山正教
  </p>
  <div class="qr-wrapper" style="padding: 15px; background: white; border-radius: 8px; display: inline-block;">
    <img src="static/picture/pay.png" alt="支持二维码"
      style="width: 100%; height: auto; object-fit: cover; transition: transform 0.3s ease;"
      onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
  </div>
  <p style="color: #74b9ff; margin-top: 1.5rem; font-size: 0.9em;">
     感谢各位❤
  </p>
</div>

<script>
  function copySpell(card) {
    const content = card.querySelector('.spell-content').innerText;
    navigator.clipboard.writeText(content)
      .then(() => showNotice())
      .catch(err => console.error('复制失败:', err));
  }

  function showNotice() {
    const notice = document.getElementById('copyNotice');
    notice.style.display = 'block';
    setTimeout(() => notice.style.display = 'none', 1500);
  }
</script>

<script>
  const guaMap = {
      '上乾下乾':'乾为天', '上坤下坤':'坤为地', '上坎下震':'水雷屯',
      '上艮下坎':'山水蒙', '上坎下乾':'水天需', '上乾下坎':'天水讼',
      '上坤下坎':'地水师', '上坎下坤':'水地比', '上巽下乾':'风天小畜',
      '上乾下兑':'天泽履', '上坤下乾':'地天泰', '上乾下坤':'天地否',
      '上乾下离':'天火同人', '上离下乾':'火天大有', '上坤下艮':'地山谦',
      '上震下坤':'雷地豫', '上兑下震':'泽雷随', '上艮下巽':'山风蛊',
      '上坤下兑':'地泽临', '上巽下坤':'风地观', '上离下震':'火雷噬嗑',
      '上艮下离':'山火贲', '上艮下坤':'山地剥', '上坤下震':'地雷复',
      '上乾下震':'天雷无妄', '上艮下乾':'山天大畜', '上艮下震':'山雷颐',
      '上兑下巽':'泽风大过', '上坎下坎':'坎为水', '上离下离':'离为火',
      '上兑下艮':'泽山咸', '上震下巽':'雷风恒', '上乾下艮':'天山遯',
      '上震下乾':'雷天大壮', '上离下坤':'火地晋', '上坤下离':'地火明夷',
      '上巽下离':'风火家人', '上离下兑':'火泽睽', '上坎下艮':'水山蹇',
      '上震下坎':'雷水解', '上艮下兑':'山泽损', '上巽下震':'风雷益',
      '上兑下乾':'泽天夬', '上乾下巽':'天风姤', '上兑下坤':'泽地萃',
      '上坤下巽':'地风升', '上兑下坎':'泽水困', '上坎下巽':'水风井',
      '上兑下离':'泽火革', '上离下巽':'火风鼎', '上震下震':'震为雷',
      '上艮下艮':'艮为山', '上巽下艮':'风山渐', '上震下兑':'雷泽归妹',
      '上震下离':'雷火丰', '上离下艮':'火山旅', '上巽下巽':'巽为风',
      '上兑下兑':'兑为泽', '上巽下坎':'风水涣', '上坎下兑':'水泽节',
      '上巽下兑':'风泽中孚', '上震下艮':'雷山小过', '上坎下离':'水火既济',
      '上离下坎':'火水未济'
  };

  function calculate() {
      const num1 = parseInt(document.getElementById('num1').value);
      const num2 = parseInt(document.getElementById('num2').value);
      const num3 = parseInt(document.getElementById('num3').value);

      const upperGuaIndex = num1 % 8 || 8;
      const lowerGuaIndex = num2 % 8 || 8;
      const movingIndex = num3 % 6 || 6;
      
      const upperGua = getGua(upperGuaIndex, '上');
      const lowerGua = getGua(lowerGuaIndex, '下');
      // 新增六爻生成逻辑
      const lowerYao = getYaoArray(lowerGuaIndex);
      const upperYao = getYaoArray(upperGuaIndex);
      const sixYao = [...lowerYao, ...upperYao]; // 组合六爻（下卦在前，上卦在后）

      // 生成互卦逻辑
      const huUpperYao = [sixYao[2], sixYao[3], sixYao[4]]; // 三、四、五爻
      const huLowerYao = [sixYao[1], sixYao[2], sixYao[3]]; // 二、三、四爻
      const huUpperIndex = arrayToGuaIndex(huUpperYao);
      const huLowerIndex = arrayToGuaIndex(huLowerYao);
      const huGuaKey = `上${getGua(huUpperIndex, '')}下${getGua(huLowerIndex, '')}`;

      const movingIndicator = `${movingIndex}爻动`;
      const changingGuaKey = getChangingGua(upperGuaIndex, lowerGuaIndex, movingIndex);
      const resultText = `本卦：${guaMap[`${upperGua}${lowerGua}`]}，动爻：${movingIndicator}，互卦：${guaMap[huGuaKey]}，变卦：${guaMap[changingGuaKey]}`;

      var today = Solar.fromDate(new Date());
      $('#year').val(today.getYear());
      $('#month').val(today.getMonth());
      $('#day').val(today.getDay());
      $('#hour').val(today.getHour());
      $('#minute').val(today.getMinute());
      var year = $('#year').val();
      var month = $('#month').val();
      var monthPad = month.padStart(2, '0'); // 月份补零
      var day = $('#day').val();
      var dayPad = day.padStart(2, '0');     // 日期补零
      var hour = $('#hour').val();
      var minute = $('#minute').val();

      // 计算八字
      var solar = Solar.fromYmdHms(year, month, day, hour, minute, 0);
      var lunar = solar.getLunar();
      var bazi = lunar.getEightChar();

      const meihuaPrompt = `你是一位精通宋代邵雍梅花易数的国学研究学者，擅长将传统数术转化为现代生活指导。请根据以下信息预测我的今天运势，吉凶分析，穿搭颜色推荐，现在是北京时间${today} ${hour}点，对应干支历为${bazi.getYear()} ${bazi.getMonth()} ${bazi.getDay()} ${bazi.getTime()}，我已经起好梅花易数卦【${resultText}】，请用《梅花心易》"三要十应"原则，结合现代生活场景，给出可验证的具体时段预警（精确到2小时区间）和3条可操作建议，避免使用命理术语，采用「如果...就...」的条件句格式。并对结果进行交叉校验。`

      document.getElementById('meihua_result').innerHTML = resultText;
      // 复制meihuaPrompt到剪贴板
      const textArea = document.createElement('textarea');
      textArea.value = meihuaPrompt;
      document.body.appendChild(textArea);
      textArea.select();
      document.execCommand('copy');
      document.body.removeChild(textArea);
      
      // 显示复制成功提示
      const notice = document.createElement('div');
      notice.className = 'copy-notice';
      notice.textContent = '已复制到剪贴板';
      document.body.appendChild(notice);
      notice.style.display = 'block';
      
      // 1.5秒后移除提示
      setTimeout(() => {
        notice.style.display = 'none';
        document.body.removeChild(notice);
      }, 1500);
  }

  function getGua(index, position) {
      const guaNames = { 1: '乾', 2: '兑', 3: '离', 4: '震', 
                       5: '巽', 6: '坎', 7: '艮', 8: '坤' };
      return `${position}${guaNames[index]}`;
  }

  function getYaoArray(guaIndex) {
      const guaYao = {
          1: [1, 1, 1], 2: [1, 1, 0], 3: [1, 0, 1],
          4: [1, 0, 0], 5: [0, 1, 1], 6: [0, 1, 0],
          7: [0, 0, 1], 8: [0, 0, 0]
      };
      return [...guaYao[guaIndex]];
  }

  function arrayToGuaIndex(yaoArray) {
      const key = yaoArray.join('');
      const guaMap = {
          '111':1, '110':2, '101':3, '100':4,
          '011':5, '010':6, '001':7, '000':8
      };
      return guaMap[key];
  }

  function getChangingGua(upperIndex, lowerIndex, movingIndex) {
      let upperYao = getYaoArray(upperIndex);
      let lowerYao = getYaoArray(lowerIndex);

      if (movingIndex <= 3) {
          const pos = movingIndex - 1;
          lowerYao[pos] ^= 1;
      } else {
          const pos = movingIndex - 4;
          upperYao[pos] ^= 1;
      }

      return `上${getGua(arrayToGuaIndex(upperYao), '')}下${getGua(arrayToGuaIndex(lowerYao), '')}`;
  }
</script>


<style>
.meihua-container {
  background: linear-gradient(145deg, #f6f8fa, #ffffff);
  border-radius: 15px;
  padding: 2rem;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
}

.meihua-title {
  color: #2c3e50;
  text-align: center;
  font-size: 1.8rem;
  margin-bottom: 2rem;
  font-weight: 600;
}

.meihua-wrapper {
  max-width: 500px;
  margin: 0 auto;
}

.meihua-form {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.meihua-description {
  color: #636e72;
  line-height: 1.6;
  text-align: center;
  font-size: 0.95rem;
  margin-bottom: 1rem;
}

.input-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.input-group label {
  color: #34495e;
  font-size: 0.9rem;
  font-weight: 500;
}

.meihua-input {
  padding: 0.8rem 1rem;
  border: 2px solid #e9ecef;
  border-radius: 8px;
  font-size: 1rem;
  transition: all 0.3s ease;
  width: 100%;
}

.meihua-input:focus {
  border-color: #74b9ff;
  outline: none;
  box-shadow: 0 0 0 3px rgba(116, 185, 255, 0.1);
}

.meihua-button {
  background: linear-gradient(145deg, #74b9ff, #0984e3);
  color: white;
  border: none;
  padding: 1rem 2rem;
  border-radius: 8px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  margin-top: 1rem;
}

.meihua-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(9, 132, 227, 0.2);
}

.meihua-button:active {
  transform: translateY(0);
}

.meihua-result {
  margin-top: 1.5rem;
  padding: 1rem;
  border-radius: 8px;
  background-color: #f8f9fa;
  font-size: 0.95rem;
  line-height: 1.6;
  color: #2d3436;
}

.meihua-result .moving {
  color: #e17055;
  font-weight: 500;
}

@media (max-width: 768px) {
  .meihua-container {
    padding: 1.5rem;
  }
  
  .meihua-title {
    font-size: 1.5rem;
  }
  
  .meihua-button {
    padding: 0.8rem 1.5rem;
  }
}
</style>
</html>